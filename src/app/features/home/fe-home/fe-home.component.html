<div class="demo-button-container">
    <button mat-raised-button (click)="addTodo()" color="primary" class="btn btn-lg p-3">
        <i class="bi bi-plus-circle"></i>
        Create Task
    </button>
    <!-- <button
        mat-raised-button
        [disabled]="!dataToDisplay.length"
        (click)="removeData()"
        class="demo-button">
      Remove data
    </button> -->
</div>


<div class="row">
    <div class="col-4">
        <div class="col-12 my-2">
            <div class="p-3 text-primary-emphasis bg-primary-subtle border border-primary-subtle rounded-3 text-center">
                To do ({{ dataSourceTodo.length }})
            </div>
        </div>
        <div class="col-12 example-container">
            <table mat-table [dataSource]="dataSourceTodo" class="mat-elevation-z8 demo-table">
                <ng-container [matColumnDef]="column.field" *ngFor="let column of columns" matSort
                    [matSortActive]="column.header" (matSortChange)="sortTB($event, 'Todo')">
                    <th mat-header-cell [mat-sort-header]="column.header" *matHeaderCellDef> {{ column.header }}
                    </th>
                    <td mat-cell *matCellDef="let element let i = index">
                        <span *ngIf="column.field === 'title'">
                            {{element[column.field]}}
                        </span>
                        <span *ngIf="column.field === 'description'">
                            {{element[column.field]}}
                        </span>
                        <span *ngIf="column.field === 'priority'">
                            <mat-chip *ngIf="element[column.field] === 'High'">
                                <i class="bi bi-chevron-double-up"></i>
                                {{element[column.field]}}
                            </mat-chip>
                            <mat-chip *ngIf="element[column.field] === 'Medium'">
                                {{element[column.field]}}
                            </mat-chip>
                            <mat-chip *ngIf="element[column.field] === 'Low'">
                                <i class="bi bi-chevron-double-down"></i>
                                {{element[column.field]}}
                            </mat-chip>
                        </span>
                        <span *ngIf="column.field === 'category'">
                            {{element[column.field]}}
                        </span>
                        <span *ngIf="column.field === 'status'">
                            <div class="p-3 text-primary-emphasis bg-primary-subtle border border-primary-subtle rounded-3 text-center"
                                *ngIf="element[column.field] === 'Todo'">
                                <i class="bi bi-circle-fill" class="text-secondary"></i>
                                {{element[column.field]}}
                            </div>
                            <div class="p-3 text-warning-emphasis bg-warning-subtle border border-warning-subtle rounded-3 text-center"
                                *ngIf="element[column.field] === 'InProgress'">
                                <i class="bi bi-circle-fill" class="text-secondary"></i>
                                {{element[column.field]}}
                            </div>
                            <div class="p-3 text-success-emphasis bg-success-subtle border border-success-subtle rounded-3 text-center"
                                *ngIf="element[column.field] === 'Done'">
                                <i class="bi bi-circle-fill" class="text-secondary"></i>
                                {{element[column.field]}}
                            </div>
                        </span>
                        <span *ngIf="column.field === 'createDate'">
                            {{ element[column.field] | aDate }}
                        </span>
                        <span *ngIf="column.field === 'action'">
                            <button mat-mini-fab color="primary" class="m-2" (click)="onEdit(element, i)">
                                <i class="bi bi-pencil"></i>
                            </button>
                            <button mat-mini-fab color="warn" class="m-2" (click)="onDel(element, i, 'Todo')">
                                <i class="bi bi-trash3"></i>
                            </button>
                        </span>
                    </td>
                </ng-container>


                <!-- No Data Row -->
                <tr class="mat-row text-center hover-white" *matNoDataRow>
                    <td [attr.colspan]="displayedColumns.length">
                        No data available
                    </td>
                </tr>

                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
            </table>
        </div>
    </div>

    <div class="col-4">
        <div class="col-12 my-2">
            <div class="p-3 text-warning-emphasis bg-warning-subtle border border-warning-subtle rounded-3 text-center">
                InProgress ({{ dataSourceInProgress.length }})
            </div>
        </div>
        <div class="col-12 example-container">
            <table mat-table [dataSource]="dataSourceInProgress" class="mat-elevation-z8 demo-table">
                <ng-container [matColumnDef]="column.field" *ngFor="let column of columns" matSort
                    [matSortActive]="column.header" (matSortChange)="sortTB($event, 'InProgress')">
                    <th mat-header-cell [mat-sort-header]="column.header" *matHeaderCellDef> {{ column.header }}
                    </th>
                    <td mat-cell *matCellDef="let element let i = index">
                        <span *ngIf="column.field === 'title'">
                            {{element[column.field]}}
                        </span>
                        <span *ngIf="column.field === 'description'">
                            {{element[column.field]}}
                        </span>
                        <span *ngIf="column.field === 'priority'">
                            <mat-chip *ngIf="element[column.field] === 'High'">
                                <i class="bi bi-chevron-double-up"></i>
                                {{element[column.field]}}
                            </mat-chip>
                            <mat-chip *ngIf="element[column.field] === 'Medium'">
                                {{element[column.field]}}
                            </mat-chip>
                            <mat-chip *ngIf="element[column.field] === 'Low'">
                                <i class="bi bi-chevron-double-down"></i>
                                {{element[column.field]}}
                            </mat-chip>
                        </span>
                        <span *ngIf="column.field === 'category'">
                            {{element[column.field]}}
                        </span>
                        <span *ngIf="column.field === 'status'">
                            <div class="p-3 text-primary-emphasis bg-primary-subtle border border-primary-subtle rounded-3 text-center"
                                *ngIf="element[column.field] === 'Todo'">
                                <i class="bi bi-circle-fill" class="text-secondary"></i>
                                {{element[column.field]}}
                            </div>
                            <div class="p-3 text-warning-emphasis bg-warning-subtle border border-warning-subtle rounded-3 text-center"
                                *ngIf="element[column.field] === 'InProgress'">
                                <i class="bi bi-circle-fill" class="text-secondary"></i>
                                {{element[column.field]}}
                            </div>
                            <div class="p-3 text-success-emphasis bg-success-subtle border border-success-subtle rounded-3 text-center"
                                *ngIf="element[column.field] === 'Done'">
                                <i class="bi bi-circle-fill" class="text-secondary"></i>
                                {{element[column.field]}}
                            </div>
                        </span>
                        <span *ngIf="column.field === 'createDate'">
                            {{ element[column.field] | aDate }}
                        </span>
                        <span *ngIf="column.field === 'action'">
                            <button mat-mini-fab color="primary" class="m-2" (click)="onEdit(element, i)">
                                <i class="bi bi-pencil"></i>
                            </button>
                            <button mat-mini-fab color="warn" class="m-2" (click)="onDel(element, i, 'InProgress')">
                                <i class="bi bi-trash3"></i>
                            </button>
                        </span>
                    </td>
                </ng-container>


                <!-- No Data Row -->
                <tr class="mat-row text-center hover-white" *matNoDataRow>
                    <td [attr.colspan]="displayedColumns.length">
                        No data available
                    </td>
                </tr>

                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
            </table>
        </div>
    </div>

    <div class="col-4">
        <div class="col-12 my-2">
            <div class="p-3 text-success-emphasis bg-success-subtle border border-success-subtle rounded-3 text-center">
                Done ({{ dataSourceDone.length }})
            </div>
        </div>
        <div class="col-12 example-container">
            <table mat-table [dataSource]="dataSourceDone" class="mat-elevation-z8 demo-table">
                <ng-container [matColumnDef]="column.field" *ngFor="let column of columns" matSort
                    [matSortActive]="column.header" (matSortChange)="sortTB($event, 'Done')">
                    <th mat-header-cell [mat-sort-header]="column.header" *matHeaderCellDef> {{ column.header }}
                    </th>
                    <td mat-cell *matCellDef="let element let i = index">
                        <span *ngIf="column.field === 'title'">
                            {{element[column.field]}}
                        </span>
                        <span *ngIf="column.field === 'description'">
                            {{element[column.field]}}
                        </span>
                        <span *ngIf="column.field === 'priority'">
                            <mat-chip *ngIf="element[column.field] === 'High'">
                                <i class="bi bi-chevron-double-up"></i>
                                {{element[column.field]}}
                            </mat-chip>
                            <mat-chip *ngIf="element[column.field] === 'Medium'">
                                {{element[column.field]}}
                            </mat-chip>
                            <mat-chip *ngIf="element[column.field] === 'Low'">
                                <i class="bi bi-chevron-double-down"></i>
                                {{element[column.field]}}
                            </mat-chip>
                        </span>
                        <span *ngIf="column.field === 'category'">
                            {{element[column.field]}}
                        </span>
                        <span *ngIf="column.field === 'status'">
                            <div class="p-3 text-primary-emphasis bg-primary-subtle border border-primary-subtle rounded-3 text-center"
                                *ngIf="element[column.field] === 'Todo'">
                                <i class="bi bi-circle-fill" class="text-secondary"></i>
                                {{element[column.field]}}
                            </div>
                            <div class="p-3 text-warning-emphasis bg-warning-subtle border border-warning-subtle rounded-3 text-center"
                                *ngIf="element[column.field] === 'InProgress'">
                                <i class="bi bi-circle-fill" class="text-secondary"></i>
                                {{element[column.field]}}
                            </div>
                            <div class="p-3 text-success-emphasis bg-success-subtle border border-success-subtle rounded-3 text-center"
                                *ngIf="element[column.field] === 'Done'">
                                <i class="bi bi-circle-fill" class="text-secondary"></i>
                                {{element[column.field]}}
                            </div>
                        </span>
                        <span *ngIf="column.field === 'createDate'">
                            {{ element[column.field] | aDate }}
                        </span>
                        <span *ngIf="column.field === 'action'">
                            <button mat-mini-fab color="primary" class="m-2" (click)="onEdit(element, i)">
                                <i class="bi bi-pencil"></i>
                            </button>
                            <button mat-mini-fab color="warn" class="m-2" (click)="onDel(element, i, 'Done')">
                                <i class="bi bi-trash3"></i>
                            </button>
                        </span>
                    </td>
                </ng-container>


                <!-- No Data Row -->
                <tr class="mat-row text-center hover-white" *matNoDataRow>
                    <td [attr.colspan]="displayedColumns.length">
                        No data available
                    </td>
                </tr>

                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
            </table>
        </div>
    </div>

</div>




<!--- Dialog --->
<p-dialog [(visible)]="displayDialogAddTodo" [modal]="true" [autoZIndex]="true" [draggable]="false"
    [style]="{'width': '80vw'}" [contentStyle]="{'overflow':'auto'}" [closable]="true">
    <ng-template pTemplate="header">
        <p class="text-header-dialog">
            {{ mode }} Task
        </p>
    </ng-template>
    <v-task-work *ngIf="displayDialogAddTodo" [mode]="mode" [rowDataSelected]="rowDataSelected"
        [indexSelected]="indexSelected" [previousStatus]="previousStatus" (confirmAdd)="confirmAdd($event)"
        (confirmUpdate)="onConfirmUpdate($event)" (confirmCancel)="onConfirmCancel($event)"></v-task-work>
</p-dialog>

<!-- <pre>{{ this.dataSourceTodo | json }}</pre>
<pre>{{ this.dataSourceInProgress | json }}</pre>
<pre>{{ this.dataSourceDone | json }}</pre> -->